import{f as J,e as p,d,b as K}from"./pmy9SyBJ.js";import{p as O,G as A,J as q,j as I,t as x,k as B,I as D,l as e,C as P,K as Q,E as _,F as E}from"./DzGT24kb.js";import{p as C,i as R}from"./_53CYELQ.js";import{e as F,i as S,a as H,s as v}from"./Dgj4WZ_2.js";import{s as U}from"./D4AJPxNQ.js";import{b as V}from"./P9yqtvKc.js";import{o as W}from"./Bv00vlrO.js";const L=(b,o)=>{var f;(f=o.photoClick)==null||f.call(o,{src:b.target.src})};var X=p('<a target="_blank" rel="noopener noreferrer" class="svelte-1n8tdm1"><img loading="lazy" class="img-hover column svelte-1n8tdm1"></a>'),Y=p('<img loading="lazy" class="img-hover column svelte-1n8tdm1">'),Z=p('<div class="column svelte-1n8tdm1"></div>'),$=p('<div class="slot-holder svelte-1n8tdm1"><!></div> <div class="root svelte-1n8tdm1"></div>',1);function nt(b,o){O(o,!0);let f=C(o,"focusPoint",19,()=>({})),y=C(o,"columnCount",3,4),z=C(o,"imageHeight",3,"250px"),i=A(null),u=A(q([]));const j=()=>{if(!e(i))return;const a=Array.from(e(i).childNodes).filter(t=>t instanceof HTMLElement&&(t.tagName==="IMG"||t.tagName==="A"&&t.childNodes[0]instanceof HTMLElement&&t.childNodes[0].tagName==="IMG"));E(u,new Array(y()).fill([]),!0);for(let t=0;t<a.length;t++){const n=t%y(),c=a[t].tagName==="A"?a[t].href:null,l=a[t].tagName==="IMG"?a[t]:a[t].childNodes[0],{src:m,alt:k,className:M}=l,G=m.split("/").pop().split("?")[0].replace(/\.[\w\d-]{8}\.jpg/,".jpg"),r=f()[G],s=r?`object-position: ${r}`:null;e(u)[n]=[...e(u)[n],{src:m,alt:k,class:M,style:s,href:c}]}};W(()=>{j();const a=new MutationObserver(j);return a.observe(e(i),{childList:!0}),()=>a.disconnect()});var w=$(),h=I(w),T=P(h);U(T,()=>o.children??Q),_(h),V(h,a=>E(i,a),()=>e(i));var N=D(h,2);F(N,21,()=>e(u),S,(a,t)=>{var n=Z();F(n,21,()=>e(t),c=>c.src,(c,l)=>{var m=K(),k=I(m);{var M=r=>{var s=X(),g=P(s);g.__click=[L,o],_(s),x(()=>{v(s,"href",e(l).href),v(g,"src",e(l).src),v(g,"alt",e(l).alt),H(g,e(l).style)}),d(r,s)},G=r=>{var s=Y();s.__click=[L,o],x(()=>{v(s,"src",e(l).src),v(s,"alt",e(l).alt),H(s,e(l).style)}),d(r,s)};R(k,r=>{e(l).href?r(M):r(G,!1)})}d(c,m)}),_(n),d(a,n)}),_(N),x(()=>H(N,`--columns-count: ${y()??""}; --image-height: ${z()??""}`)),d(b,w),B()}J(["click"]);export{nt as G};
